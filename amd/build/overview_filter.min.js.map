{"version":3,"file":"overview_filter.min.js","sources":["../src/overview_filter.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Overview table filter.\n *\n * @module  block_completion_progress/overview_filter\n * @copyright 2021 Tomo Tsuyuki <tomotsuyuki@catalyst-au.net>\n * @copyright 2025 Jonathon Fowler <fowlerj@usq.edu.au>\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport DataFilter from 'core/datafilter';\nimport DataFilterSelectors from 'core/datafilter/selectors';\nimport * as DynamicTable from 'core_table/dynamic';\nimport Notification from 'core/notification';\nimport BlockInstanceFilter from 'block_completion_progress/datafilter/filtertypes/blockinstanceid';\n\n/**\n * Initialise the overview table filter.\n * @param {String} filterRegionId The id of the filter element.\n * @param {Integer} blockInstanceId The block instance id.\n */\nexport const init = async (filterRegionId, blockInstanceId) => {\n    const filterSet = document.querySelector(`#${filterRegionId}`);\n\n    const applyFilters = (filters, pendingPromise) => {\n        DynamicTable\n            .setFilters(\n                DynamicTable.getTableFromId(filterSet.dataset.tableRegion),\n                {\n                    jointype: parseInt(filterSet.querySelector(DataFilterSelectors.filterset.fields.join).value, 10),\n                    filters,\n                }\n            )\n            .then(result => {\n                pendingPromise.resolve();\n                return result;\n            })\n            .catch(Notification.exception);\n    };\n\n    const dataFilter = new DataFilter(filterSet, applyFilters);\n    dataFilter.activeFilters.blockinstanceid = new BlockInstanceFilter('blockinstanceid', filterSet, blockInstanceId);\n    dataFilter.init();\n};\n"],"names":["async","filterRegionId","blockInstanceId","filterSet","document","querySelector","dataFilter","DataFilter","filters","pendingPromise","DynamicTable","setFilters","getTableFromId","dataset","tableRegion","jointype","parseInt","DataFilterSelectors","filterset","fields","join","value","then","result","resolve","catch","Notification","exception","activeFilters","blockinstanceid","BlockInstanceFilter","init"],"mappings":";;;;;;;;o9BAmCoBA,MAAOC,eAAgBC,yBACjCC,UAAYC,SAASC,yBAAkBJ,iBAkBvCK,WAAa,IAAIC,oBAAWJ,WAhBb,CAACK,QAASC,kBAC3BC,aACKC,WACGD,aAAaE,eAAeT,UAAUU,QAAQC,aAC9C,CACIC,SAAUC,SAASb,UAAUE,cAAcY,mBAAoBC,UAAUC,OAAOC,MAAMC,MAAO,IAC7Fb,QAAAA,UAGPc,MAAKC,SACFd,eAAee,UACRD,UAEVE,MAAMC,sBAAaC,cAI5BrB,WAAWsB,cAAcC,gBAAkB,IAAIC,yBAAoB,kBAAmB3B,UAAWD,iBACjGI,WAAWyB"}