define("block_completion_progress/overview_filter",["exports","core/datafilter/filtertypes/courseid","core/datafilter","core/datafilter/selectors","core_table/dynamic","core/notification","block_completion_progress/datafilter/filtertypes/blockinstanceid"],(function(_exports,_courseid,_datafilter,_selectors,DynamicTable,_notification,_blockinstanceid){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Overview table filter.
   *
   * @module  block_completion_progress/overview_filter
   * @copyright 2021 Tomo Tsuyuki <tomotsuyuki@catalyst-au.net>
   * @copyright 2025 Jonathon Fowler <fowlerj@usq.edu.au>
   * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_courseid=_interopRequireDefault(_courseid),_datafilter=_interopRequireDefault(_datafilter),_selectors=_interopRequireDefault(_selectors),DynamicTable=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(DynamicTable),_notification=_interopRequireDefault(_notification),_blockinstanceid=_interopRequireDefault(_blockinstanceid);_exports.init=async(filterRegionId,initialFilters)=>{const filterSet=document.querySelector("#".concat(filterRegionId)),dataFilter=new _datafilter.default(filterSet,((filters,pendingPromise)=>{DynamicTable.setFilters(DynamicTable.getTableFromId(filterSet.dataset.tableRegion),{jointype:parseInt(filterSet.querySelector(_selectors.default.filterset.fields.join).value,10),filters:filters}).then((result=>(pendingPromise.resolve(),result))).catch(_notification.default.exception)}));dataFilter.activeFilters.courseid=new _courseid.default("courseid",filterSet),dataFilter.activeFilters.blockinstanceid=new _blockinstanceid.default("blockinstanceid",filterSet,initialFilters.filters.blockinstanceid.values[0]),dataFilter.init(),filterSet.querySelector(_selectors.default.filterset.fields.join).value=initialFilters.jointype;let emptyFilterRow=filterSet.querySelector(_selectors.default.filterset.regions.emptyFilterRow),rownum=1;for(let f in initialFilters.filters){let fil=initialFilters.filters[f];switch(fil.name){case"courseid":case"blockinstanceid":break;default:emptyFilterRow&&(emptyFilterRow.remove(),emptyFilterRow=void 0),dataFilter.addFilterRow({filtertype:fil.name,values:fil.values,jointype:fil.jointype,rownum:rownum}),rownum++}}}}));

//# sourceMappingURL=overview_filter.min.js.map